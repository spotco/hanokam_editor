<!DOCTYPE html>
<html>
<head>
	<script type="text/javascript" src="jquery.min.js"></script>
	<script src="jquery-ui.min.js" type="text/javascript"></script>
	<link href="jquery-ui.css" rel="stylesheet" type="text/css" />

	<script src="SPUtil.js" type="text/javascript"></script>
	<script src="SPInputManager.js" type="text/javascript"></script>
	<script src="Canvas.js" type="text/javascript"></script>
	<script src="SPAppData.js" type="text/javascript"></script>
	<script src="SPGridCore.js" type="text/javascript"></script>
	<script src="SPAppUI.js" type="text/javascript"></script>
	
	<style type="text/css">
.controls {
	display:inline-block;
	background:#AAAAAA;
	border:3px dashed grey;
	position:absolute;
	overflow:hidden;
	white-space:nowrap;
	padding:5px;
}
.modebutton {
	padding:5px;
}
	</style>
	
	<script type="text/javascript">
		var _g = {
			_data : SPAppData(),
			_ui : SPAppUI(),
			_grid : SPGridCore(),
			_input : SPInputManager(),
		};

		$(function() {

			// order here is relevant
			var components = [
				_g._data,
				_g._grid,
				_g._ui,
				_g._input
			];

			components.forEach(function(itr){
				itr.i_cons(_g);
			})

			window.setInterval(function() {
				components.forEach(function(itr){
					itr.i_update(_g);
				});
			},40);
		});
	</script>
</head>

<body>
	<canvas id="grid" width="600px" height="600px" style="background-color:rgb(0,0,0)">
	</canvas>

	<div class="controls">
		<b>Input/Output</b><br/>
		<textarea id="msgout" style="width:400px;height:200px;">
HanokamEditor_Water
		</textarea>
		<br />
		<input type="button" value="Load JSON" onclick="_g._ui.json_in_pressed(_g)" style="float:left;" />
		<input type="button"  value="Output JSON (P)" onclick="_g._ui.json_out_pressed(_g)" style="float:right;" />
	</div>
	
	<div class="controls" style="top:300px;">
		<b>Mode</b><br/>
		<div>
			<select id="type_select">
			</select>
			<!--
			<button class="modebutton" onclick="_g._ui.set_and_update_mode(_g,_g._ui.MODES['1pt'])">1pt</button><br/>
			<button class="modebutton" onclick="_g._ui.set_and_update_mode(_g,_g._ui.MODES['2pt'])">2pt</button><br/>
		-->
		</div>
	</div>
	
	<div class="controls" style="top:400px;">
		<b>Values</b><br/>
		<div class="1pt">
			1pt values<br/>
			Val:
			<select class="val_select">
			</select>
		</div>
		<div class="2pt">
			2pt values<br/>
			Val:
			<select class="val_select">
			</select>
			<br/>
			Speed:
			<input class="speed_select" type="number" value="5" />
		</div>
	</div>

	<div class="controls" style="top:300px;left:800px;width:300px">
		<b>Info</b><br/>
		<div id="info_focused"></div>
		<div id="info_current_grid_mode"></div>
	</div>
</body>
</html>
